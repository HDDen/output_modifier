!function(){function n(){var e,n=!1;if("y"==((e=RegExp("[?&]"+"deb"+"=([^&]*)").exec(window.location.search))&&decodeURIComponent(e[1].replace(/\+/g," ")))&&(n=!0),n){var t=document.createElement("div");t.setAttribute("id","debug_output"),t.style.padding="10px",t.style.border="1px solid black",t.style.width="100%",t.style.background="#fff",t.innerHTML="<p>Debugger:</p>",document.getElementsByTagName("body")[0].appendChild(t),t=document.getElementById("debug_output")}n&&(t.innerHTML+="<p>Запуск testWebp()</p>"),function(e){n&&(t.innerHTML+="<p>Мы в testWebP()</p>");var p=new Image;p.onerror=function(){n&&(t.innerHTML+="<p>Webp не поддерживается, запускаем коллбэк</p>"),e(!1)},p.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(function(e){e||function(){n&&(t.innerHTML+="<p>unwebp(): start</p>");var e=document.querySelectorAll('img[src*=".webp"], img[srcset*=".webp"], img[data-src*=".webp"], img[data-srcset*=".webp"]');if(n&&(t.innerHTML+="<p>unwebp(): imgs.length = "+e.length+"</p>"),e.length>0){n&&(t.innerHTML+="<p>unwebp(): Начало перебора imgs</p>");for(var p=["src","srcset","data-src","data-srcset"],r=0;r<e.length;r++)for(var i=0;i<p.length;i++)if(e[r].hasAttribute(p[i])){n&&(t.innerHTML+="<p>unwebp(): imgs["+r+"] имеет атрибут "+p[i]+"</p>");var b=e[r].getAttribute(p[i]);n&&(t.innerHTML+="<p>unwebp(): "+b+"</p>"),b=b.replace(".webp",""),n&&(t.innerHTML+="<p>unwebp(): "+b+"</p>",t.innerHTML+="<p>unwebp(): --------------</p>"),e[r].setAttribute(p[i],b)}}n&&(t.innerHTML+="<p>unwebp(): теперь фоновые</p>");var a=document.querySelectorAll('*[style*=".webp"], *[data-bg*=".webp"]');if(n&&(t.innerHTML+="<p>unwebp(): bgs.length = "+a.length+"</p>"),a.length>0)for(n&&(t.innerHTML+="<p>unwebp(): старт перебора bgs</p>"),p=["style","data-bg"],r=0;r<a.length;r++)for(i=0;i<p.length;i++)a[r].hasAttribute(p[i])&&(n&&(t.innerHTML+="<p>unwebp(): bgs["+r+"] имеет атрибут "+p[i]+"</p>"),b=a[r].getAttribute(p[i]),n&&(t.innerHTML+="<p>unwebp(): "+b+"</p>"),b=b.replace(".webp",""),n&&(t.innerHTML+="<p>unwebp(): "+b+"</p>",t.innerHTML+="<p>unwebp(): --------------</p>"),a[r].setAttribute(p[i],b))}()})}"loading"!=document.readyState?n():document.addEventListener("DOMContentLoaded",function(){n()})}();